#include <stdio.h>
#include <signal.h>
#include <stdlib.h>
#include <stdbool.h>
#include <dirent.h>
#include <string.h>


const int SIZE = 40;

void PromptCharacter(); // user prompt character that should always be represented.
void Commands(char *response); // all commands the user may enter.
void INThandler(int); // exits.

int main(void)
{
  char response[SIZE];

  gets(response);
  printf("Value: ", response);
  //PromptCharacter();
  return 0;
}

// Driver
void PromptCharacter() {
  // This loop should always be running, waiting for user input. (We may push this into a function later).
  char response[SIZE];
  int length = 0;
  
  while(true) {
    printf(">: ");

    //fgets(response, SIZE, stdin);

    gets(response);

    printf("It worked, the response is: %s", response);
    
    int count = 0;
    
    /*for (int i = 0; response[i] != '\0'; i++) {
      count++;
      printf(count);
      }*/
    /*while (c != EOF) {
      response[count] = c;
      ++count;
      c = getchar();
      }*/
  }
  
  /* signal(SIGINT, INThandler);
  while (1)
    pause();

    INThandler(1);*/
}

// Needs fixing
void Commands(char *response) {
  // ls command: shows all files in the directory.
  int length = 0;
  
  for (int i = 0; i < response[i]; i++) {
    length = i;
  }
  
  for (int i = 0; i < length; i++) {
    if (response[i] == "ls") {
      DIR *d;
      struct dirent *dir;
      d = opendir(".");

      if (d) {
	while ((dir = readdir(d)) != NULL) {
	  printf("%s\n", dir -> d_name);
	}
	closedir(d);
      }
    }
  }
}

void  INThandler(int sig) {
    char response;
    
    signal(sig, SIG_IGN);
    printf("Do you really want to quit? [y/n] ");
    response = getchar();
        
    if (response == 'Y' || response == 'y')
        exit(0);
    else
        signal(SIGINT, INThandler);
        
        
    getchar(); // Get new line character
}
